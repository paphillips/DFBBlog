---
layout:        default
title:         Square the input
categories:    [Examples]
thumb:         
summary:       This is a basic example of how to square the value coming in on the Stage input.
---
<div id="contentcontainer">  <h1>Square the input</h1>  <p>This is a basic example of how to square the value coming in on the Stage input.</p>  <pre class="language-asmcypressdfb line-numbers"><code>// [title] Square the input// [brief] This is a basic example of how to square the value coming in on the Stage input.initial:    // ------------------------    // Setup and initialization    // ------------------------    // [acu]    Clear    // [alu]    Set to zero    acu(clear, clear) dmux(sa, sa) alu(set0) mac(hold)    // [acu]    Set modulus arithmentic [ON]    // [jmp]    Unconditional jump to [wait_for_in1]    acu(setmod, setmod) dmux(sa, sa) alu(hold) mac(hold) jmp(eob, wait_for_in1)wait_for_in1:    // -------------------------------------------------------    // Wait for data to be written to Staging Register Input 1    // -------------------------------------------------------    // [jmpl]:      Is value [in1] register populated with Stage_A data?    //                  [True]   Value loaded - go to [dataRead]    //                  [False]  Loop to [wait_for_in1]    // [dmux].a     Set up to load Stage_A value into [mac].a and [mac].b    // [mac]        Set up to multiply a * b without adding any accumulated value    acu(hold, hold) addr(1) dmux(bm, bm) alu(hold) mac(clra) jmpl(in1, dataRead)dataRead:    // -----------------------------------------    // Run the calculation and output the result    // -----------------------------------------    // [mac]    Loads a and b from Stage_A -&gt; Mux_0 -&gt; Mux_1 -&gt; Mux_2 -&gt; mac    acu(hold, hold) dmux(sm, sm) alu(seta) mac(hold)    // [mac]    Multiplication of a and b is output    // [alu]    Set up to output mac result    acu(hold, hold) dmux(sa, sa) alu(hold) mac(hold)    // [alu]    Output mac result    acu(hold, hold) dmux(sm, sm) alu(seta) mac(hold)    // [write]  Write calculation result to [Hold_A]    // [jmp]    Unconditional jump to [wait_for_in1]    acu(hold, hold) addr(1) dmux(sm, sm) alu(hold) mac(hold) write(abus) jmp(eob, wait_for_in1)</code></pre>  <h2>Jump Diagram</h2>  <figure class="figure" >    <object type="image/svg+xml" data="/assets/svg/2018-03-04-square_the_input-JumpDiagram.svg">Your browser does not support SVG</object>    <figcaption class="figure-caption">Call Diagram for this program from the DFB Assembler Mini IDE</figcaption>  </figure>  <h2>Instruction Detail</h2>  <h2>initial</h2>  <section id="initial" class="p-4">    <h3>Line 12</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="12"><code>acu(clear, clear) dmux(sa, sa) alu(set0) mac(hold)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Sets reg to 0, put 0 on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Sets reg to 0, put 0 on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Shifter to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Shifter to ALU</span>          </td>        </tr>        <tr>          <td rowspan="2">            <span class="badge badge-primary">alu</span>          </td>          <td rowspan="2">            <span class="badge badge-primary"></span>          </td>          <td>            <span>Sets the ALU output to 0</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-success">User comment</span> Set to zero</td>        </tr>        <tr>          <td>            <span class="badge badge-primary">mac</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the accumulator, no multiply (no power in mult)</span>          </td>        </tr>      </tbody>    </table>    <h3>Line 16</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="16"><code>acu(setmod, setmod) dmux(sa, sa) alu(hold) mac(hold) jmp(eob, wait_for_in1)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Sets arithmetic to modulo mreg</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Sets arithmetic to modulo mreg</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Shifter to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Shifter to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">alu</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the ALU output from the previous cycle.</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">mac</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the accumulator, no multiply (no power in mult)</span>          </td>        </tr>      </tbody>    </table>  </section>  <h2>wait_for_in1</h2>  <section id="wait_for_in1" class="p-4">    <h3>Line 28</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="28"><code>acu(hold, hold) addr(1) dmux(bm, bm) alu(hold) mac(clra) jmpl(in1, dataRead)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">Stage In</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Selected for read</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Bus to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Bus to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">alu</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the ALU output from the previous cycle.</span>          </td>        </tr>        <tr>          <td rowspan="2">            <span class="badge badge-primary">mac</span>          </td>          <td rowspan="2">            <span class="badge badge-primary"></span>          </td>          <td>            <span>Clears the accumulator. Loads it with the current product</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-success">User comment</span> Set up to multiply a * b without adding any accumulated value</td>        </tr>      </tbody>    </table>  </section>  <h2>dataRead</h2>  <section id="dataRead" class="p-4">    <h3>Line 36</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="36"><code>acu(hold, hold) dmux(sm, sm) alu(seta) mac(hold)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Shifter to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Shifter to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">alu</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Passes A to the ALU output.</span>          </td>        </tr>        <tr>          <td rowspan="2">            <span class="badge badge-primary">mac</span>          </td>          <td rowspan="2">            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the accumulator, no multiply (no power in mult)</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-success">User comment</span> Loads a and b from Stage_A -&gt; Mux_0 -&gt; Mux_1 -&gt; Mux_2 -&gt; mac</td>        </tr>      </tbody>    </table>    <h3>Line 40</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="40"><code>acu(hold, hold) dmux(sa, sa) alu(hold) mac(hold)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Shifter to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Shifter to ALU</span>          </td>        </tr>        <tr>          <td rowspan="2">            <span class="badge badge-primary">alu</span>          </td>          <td rowspan="2">            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the ALU output from the previous cycle.</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-success">User comment</span> Set up to output mac result</td>        </tr>        <tr>          <td rowspan="2">            <span class="badge badge-primary">mac</span>          </td>          <td rowspan="2">            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the accumulator, no multiply (no power in mult)</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-success">User comment</span> Multiplication of a and b is output</td>        </tr>      </tbody>    </table>    <h3>Line 43</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="43"><code>acu(hold, hold) dmux(sm, sm) alu(seta) mac(hold)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Shifter to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Shifter to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td rowspan="2">            <span class="badge badge-primary">alu</span>          </td>          <td rowspan="2">            <span class="badge badge-primary"></span>          </td>          <td>            <span>Passes A to the ALU output.</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-success">User comment</span> Output mac result</td>        </tr>        <tr>          <td>            <span class="badge badge-primary">mac</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the accumulator, no multiply (no power in mult)</span>          </td>        </tr>      </tbody>    </table>    <h3>Line 47</h3>    <pre class="language-asmcypressdfb line-numbers" data-start="47"><code>acu(hold, hold) addr(1) dmux(sm, sm) alu(hold) mac(hold) write(abus) jmp(eob, wait_for_in1)</code></pre>    <table class="table table-sm table-hover dfb">      <thead>        <tr>          <th scope="col">Instr</th>          <th scope="col"></th>          <th scope="col">Description</th>        </tr>      </thead>      <tbody>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">acu</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Puts reg on the output</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Shifter to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">dmux</span>          </td>          <td>            <span class="badge badge-primary">B</span>          </td>          <td>            <span>Shifter to MAC, MAC to ALU</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">alu</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the ALU output from the previous cycle.</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">mac</span>          </td>          <td>            <span class="badge badge-primary"></span>          </td>          <td>            <span>Holds the accumulator, no multiply (no power in mult)</span>          </td>        </tr>        <tr>          <td>            <span class="badge badge-primary">write</span>          </td>          <td>            <span class="badge badge-primary">A</span>          </td>          <td>            <span>Hold out selected for write</span>          </td>        </tr>      </tbody>    </table>  </section></div>